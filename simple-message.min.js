function make(e,i){var t,a=document.createElement(e);for(t in i)i.hasOwnProperty(t)&&a.setAttribute(t,i[t]);return a}var Message={options:{messageHolderId:"messageHolder"},queue:[],show:function(e){var i;Message.init(e),i=new MessageItem(e).show(),this.queue.push(i)},init:function(){var e=document.getElementById(Message.options.messageHolderId);e||(e=make("ul",{id:Message.options.messageHolderId}),document.body.appendChild(e))}},MessageItem=function(e){return this.defaults={type:"success",title:"",messageText:"",closeDelay:0,activeClass:"",timeout:!1,templateFunction:!1,template:{wrapper:{tag:"div","class":"message-wrap"},title:{tag:"h3","class":"title"},content:{tag:"div","class":"content"}}},this.options=this.merge(this.defaults,e),this};MessageItem.prototype.show=function(){var e=this;return e.options.message=make("li",{"class":"message-item"}),e.options.message.innerHTML=e.render(e.options),e.options.message_holder=document.getElementById(Message.options.messageHolderId),e.options.message_holder.appendChild(e.options.message),e.options.activeClass&&window.setTimeout(function(){e.options.message.className=e.options.message.className+" "+e.options.activeClass},0),e.options.message.onclick=function(){e.close()},e.options.timeout&&window.setTimeout(function(){e.close()},e.options.timeout),this},MessageItem.prototype.close=function(){var e=this,i=new RegExp("(^|\\s)"+e.options.activeClass+"(\\s|$)","g");return e.options.closed?!0:(e.options.closed=!0,e.options.message.className=e.options.message.className.replace(i,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,""),window.setTimeout(function(){e.options.message_holder.removeChild(e.options.message),0===e.options.message_holder.getElementsByTagName("li").length&&document.body.removeChild(e.options.message_holder)},e.options.closeDelay),void 0)},MessageItem.prototype.render=function(e){var i,t,a,n;return this.options.templateFuntion&&"function"==typeof this.options.templateFuntion?this.options.templateFuntion(e):(n=e.template,a=make(n.wrapper.tag,{"class":n.wrapper.class}),e.title&&(i=make(n.title.tag,{"class":n.title.class}),i.innerHTML=e.title,a.innerHTML=i.outerHTML),e.messageText&&(t=make(n.content.tag,{"class":n.content.class}),t.innerHTML=e.messageText,a.innerHTML=a.innerHTML+t.outerHTML),a.outerHTML)},MessageItem.prototype.merge=function(e,i){for(var t in i)i.hasOwnProperty(t)&&(i[t]&&i[t].constructor&&i[t].constructor===Object?this.merge(e[t]=e[t]||{},i[t]):e[t]=i[t]);return e};